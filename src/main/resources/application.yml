spring:
  application:
    name: mcp-gateway

  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=10000,expireAfterWrite=5m

server:
  port: 8080
  compression:
    enabled: true

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    export:
      prometheus:
        enabled: true

mcp:
  gateway:
    cache:
      default-ttl: 5m
      max-size: 10000
      eviction-strategy: lru

    routing:
      retry:
        max-attempts: 3
        backoff-delay: 1s
        backoff-multiplier: 2

      timeout:
        connect: 5s
        read: 30s

    health:
      check-interval: 60s
      unhealthy-threshold: 3

    # Pre-configured backend servers (can also register dynamically)
    servers:
      - id: journey-service-mcp
        name: Journey Service
        endpoint: ${JOURNEY_SERVICE_URL:http://journey-service:8080/mcp}
        transport: http
        priority: 1

      - id: swiss-mobility-mcp
        name: Swiss Mobility
        endpoint: ${SWISS_MOBILITY_URL:http://swiss-mobility:8080/mcp}
        transport: http
        priority: 1

      - id: aareguru-mcp
        name: Aareguru
        endpoint: ${AAREGURU_URL:http://aareguru:8000/mcp}
        transport: http
        priority: 2

      - id: open-meteo-mcp
        name: Open-Meteo
        endpoint: ${OPEN_METEO_URL:http://open-meteo:8000/mcp}
        transport: http
        priority: 2

logging:
  level:
    ch.sbb.mcp.gateway: INFO
    org.springframework.web: INFO
  pattern:
    console: '%d{yyyy-MM-dd HH:mm:ss} - %msg%n'
